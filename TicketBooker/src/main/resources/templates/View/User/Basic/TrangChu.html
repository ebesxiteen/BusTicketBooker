<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{View/Layout/UserLayout.html}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GreenBus Lines - Đặt vé xe khách trực tuyến</title>
    <!-- Đảm bảo CSS trang chủ được load nếu cần style riêng -->
    <link rel="stylesheet" th:href="@{/css/TrangChu.css}">
</head>
<body class="bg-gray-50">
<div layout:fragment="content">
    
    <!-- Banner Carousel -->
    <div class="relative overflow-hidden">
        <div class="carousel flex">
            <div class="carousel-item w-full">
                <!-- GIỮ NGUYÊN ẢNH CŨ CỦA BẠN -->
                <img src="/components/banner.jpg?height=400&width=1920"
                     alt="Banner GreenBus" class="w-full object-cover min-h-[300px] md:min-h-[400px]">
            </div>
        
        <!-- Controls (Giữ nguyên nếu có JS xử lý slide) -->
        <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2">
            <button class="w-3 h-3 rounded-full bg-white opacity-70 hover:opacity-100 transition-opacity duration-200"></button>
            <button class="w-3 h-3 rounded-full bg-white opacity-70 hover:opacity-100 transition-opacity duration-200"></button>
            <button class="w-3 h-3 rounded-full bg-white opacity-70 hover:opacity-100 transition-opacity duration-200"></button>
        </div>
    </div>

    <!-- Booking Form (Form tìm kiếm) -->
    <!-- Form này sẽ nổi lên trên banner một chút -->
    <form th:action="@{/greenbus/search-trips}" id="formSearchTrip" th:object="${searchData}" method="post" 
          class="max-w-6xl mx-auto -mt-20 relative z-10 px-4 sm:px-6 lg:px-8">
        
        <div class="bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden">
            <div class="p-6 md:p-8">
                <h2 class="text-2xl font-bold text-emerald-700 mb-6 flex items-center">
                    <i class="fas fa-search-location mr-3"></i> Tìm chuyến xe
                </h2>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    
                    <!-- Điểm đi -->
                    <div class="relative group">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Điểm đi</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-map-marker-alt text-gray-400 group-focus-within:text-emerald-500 transition-colors"></i>
                            </div>
                            <!-- ID 'departure' quan trọng cho JS điền dữ liệu -->
                            <select th:field="*{departure}" id="departure" required
                                    class="selectFill departure w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg appearance-none focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-gray-50 hover:bg-white transition-all cursor-pointer">
                                <option value="">Chọn điểm đi</option>
                                <!-- Options sẽ được JS điền vào -->
                            </select>
                            <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                                <i class="fas fa-chevron-down text-gray-400"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Điểm đến -->
                    <div class="relative group">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Điểm đến</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-location-arrow text-gray-400 group-focus-within:text-emerald-500 transition-colors"></i>
                            </div>
                            <!-- ID 'arrival' quan trọng cho JS điền dữ liệu -->
                            <select th:field="*{arrival}" id="arrival" required
                                    class="selectFill arrival w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg appearance-none focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-gray-50 hover:bg-white transition-all cursor-pointer">
                                <option value="">Chọn điểm đến</option>
                                <!-- Options sẽ được JS điền vào -->
                            </select>
                            <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                                <i class="fas fa-chevron-down text-gray-400"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Ngày đi -->
                    <div class="relative group">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Ngày đi</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="far fa-calendar-alt text-gray-400 group-focus-within:text-emerald-500 transition-colors"></i>
                            </div>
                            <!-- Sử dụng type="datetime-local" để khớp với backend field -->
                            <input th:field="*{departureDate}" id="departureDate" type="datetime-local" required
                                   class="rqData w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-gray-50 hover:bg-white transition-all">
                        </div>
                    </div>

                    <!-- Số vé -->
                    <div class="relative group">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">Số vé</label>
                        <div class="relative">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-ticket-alt text-gray-400 group-focus-within:text-emerald-500 transition-colors"></i>
                            </div>
                            <select th:field="*{ticketQuantity}" id="ticketQuantity"
                                    class="rqData w-full pl-10 pr-10 py-3 border border-gray-300 rounded-lg appearance-none focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent bg-gray-50 hover:bg-white transition-all cursor-pointer">
                                <option value="1">1 vé</option>
                                <option value="2">2 vé</option>
                                <option value="3">3 vé</option>
                                <option value="4">4 vé</option>
                                <option value="5">5 vé</option>
                            </select>
                            <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none">
                                <i class="fas fa-chevron-down text-gray-400"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Nút Tìm Kiếm -->
                <div class="mt-8 flex justify-center md:justify-end pt-4 border-t border-gray-100">
                    <button type="submit" class="h-12 px-10 bg-emerald-600 hover:bg-emerald-700 text-white font-medium rounded-lg transition-colors shadow-md flex items-center justify-center transform hover:-translate-y-0.5">
                        <i class="fas fa-search mr-2"></i> TÌM CHUYẾN XE
                    </button>
                </div>
            </div>
        </div>
    </form>

    <!-- Popular Routes Section -->
    <div class="bg-white py-16 mt-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold text-emerald-800 mb-4">TUYẾN PHỔ BIẾN</h2>
            <p class="text-gray-600 text-lg">Những hành trình được khách hàng GreenBus yêu thích nhất</p>
            <div class="w-24 h-1 bg-emerald-500 mx-auto mt-4 rounded"></div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            
            <div onclick="searchTrip('TP. Hồ Chí Minh')"
                 class="relative overflow-hidden rounded-2xl shadow-lg group cursor-pointer transition-transform duration-300 hover:-translate-y-1">
                <div class="aspect-w-16 aspect-h-9 h-64 overflow-hidden">
                    <img src="https://images.unsplash.com/photo-1583417319070-4a69db38a482?q=80&w=1470&auto=format&fit=crop" 
                         alt="TP.HCM" 
                         class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                </div>
                <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent">
                    <div class="absolute bottom-0 left-0 p-6 text-white transform transition-transform duration-300 group-hover:translate-y-[-5px]">
                        <p class="text-sm font-medium mb-1 text-emerald-300 uppercase tracking-wider">Điểm đến</p>
                        <h3 class="text-3xl font-bold">Tp. Hồ Chí Minh</h3>
                        <div class="w-12 h-1 bg-emerald-500 mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                    </div>
                </div>
            </div>

            <div onclick="searchTrip('TP. Đà Lạt')"
                 class="relative overflow-hidden rounded-2xl shadow-lg group cursor-pointer transition-transform duration-300 hover:-translate-y-1">
                <div class="aspect-w-16 aspect-h-9 h-64 overflow-hidden">
                    <img src="https://photo2.tinhte.vn/data/attachment-files/2022/09/6122278_da_lat_7.jpg" 
                         alt="Đà Lạt" 
                         class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                </div>
                <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent">
                    <div class="absolute bottom-0 left-0 p-6 text-white transform transition-transform duration-300 group-hover:translate-y-[-5px]">
                        <p class="text-sm font-medium mb-1 text-emerald-300 uppercase tracking-wider">Điểm đến</p>
                        <h3 class="text-3xl font-bold">Đà Lạt</h3>
                        <div class="w-12 h-1 bg-emerald-500 mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                    </div>
                </div>
            </div>

            <div onclick="searchTrip('TP. Nha Trang')"
                 class="relative overflow-hidden rounded-2xl shadow-lg group cursor-pointer transition-transform duration-300 hover:-translate-y-1">
                <div class="aspect-w-16 aspect-h-9 h-64 overflow-hidden">
                    <img src="https://khoinguonsangtao.vn/wp-content/uploads/2022/11/hinh-nha-trang-bien-ve-dem.jpg" 
                         alt="Nha Trang"
                         class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                </div>
                <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent">
                    <div class="absolute bottom-0 left-0 p-6 text-white transform transition-transform duration-300 group-hover:translate-y-[-5px]">
                        <p class="text-sm font-medium mb-1 text-emerald-300 uppercase tracking-wider">Điểm đến</p>
                        <h3 class="text-3xl font-bold">Nha Trang</h3>
                        <div class="w-12 h-1 bg-emerald-500 mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

    <!-- Why Choose Us Section -->
    <div class="bg-emerald-50 py-16">
        <div class="container mx-auto px-4">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold text-emerald-800 mb-4">VÌ SAO CHỌN GREENBUS?</h2>
                <p class="text-gray-600 max-w-2xl mx-auto">Chúng tôi cam kết mang đến trải nghiệm tốt nhất cho mỗi chuyến đi của bạn.</p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                <!-- Feature 1 -->
                <div class="bg-white p-8 rounded-xl shadow-md text-center hover:shadow-xl transition duration-300 border-b-4 border-transparent hover:border-emerald-500">
                    <div class="w-16 h-16 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-6 text-2xl">
                        <i class="fas fa-bus"></i>
                    </div>
                    <h3 class="font-bold text-xl text-gray-800 mb-3">Đội Xe Hiện ại</h3>
                    <p class="text-gray-600 text-sm leading-relaxed">Hệ thống xe giường nằm, limousine cao cấp, tiện nghi, wifi tốc độ cao.</p>
                </div>

                <!-- Feature 2 -->
                <div class="bg-white p-8 rounded-xl shadow-md text-center hover:shadow-xl transition duration-300 border-b-4 border-transparent hover:border-emerald-500">
                    <div class="w-16 h-16 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-6 text-2xl">
                        <i class="fas fa-map-marked-alt"></i>
                    </div>
                    <h3 class="font-bold text-xl text-gray-800 mb-3">Mạng Lưới Rộng</h3>
                    <p class="text-gray-600 text-sm leading-relaxed">Kết nối các tỉnh thành lớn, phủ sóng rộng khắp cả nước.</p>
                </div>

                <!-- Feature 3 -->
                <div class="bg-white p-8 rounded-xl shadow-md text-center hover:shadow-xl transition duration-300 border-b-4 border-transparent hover:border-emerald-500">
                    <div class="w-16 h-16 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-6 text-2xl">
                        <i class="fas fa-headset"></i>
                    </div>
                    <h3 class="font-bold text-xl text-gray-800 mb-3">Hỗ Trợ 24/7</h3>
                    <p class="text-gray-600 text-sm leading-relaxed">Đội ngũ chăm sóc khách hàng luôn sẵn sàng giải đáp mọi thắc mắc.</p>
                </div>

                <!-- Feature 4 -->
                <div class="bg-white p-8 rounded-xl shadow-md text-center hover:shadow-xl transition duration-300 border-b-4 border-transparent hover:border-emerald-500">
                    <div class="w-16 h-16 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-6 text-2xl">
                        <i class="fas fa-percent"></i>
                    </div>
                    <h3 class="font-bold text-xl text-gray-800 mb-3">Giá Cả Hợp Lý</h3>
                    <p class="text-gray-600 text-sm leading-relaxed">Giá vé niêm yết, nhiều chương trình ưu đãi hấp dẫn cho thành viên.</p>
                </div>
            </div>
        </div>
    </div>

</div>
<script>
    function searchTrip(destination) {
        // Lấy ngày hiện tại format YYYY-MM-DD
        const today = new Date().toISOString().slice(0, 10);
        
        // Tạo link URL với tham số đúng logic
        // Mặc định departure là rỗng hoặc set cứng TP. Hồ Chí Minh tùy bạn
        const url = `/greenbus/search-trips?arrival=${encodeURIComponent(destination)}&date=${today}`;
        
        // Chuyển trang
        window.location.href = url;
    }
</script>
<!-- Import Script JS cho Trang Chủ (Nằm cuối body để đảm bảo DOM load xong) -->
<script th:src="@{/js/trangchu.js}"></script>


</body>
</html>